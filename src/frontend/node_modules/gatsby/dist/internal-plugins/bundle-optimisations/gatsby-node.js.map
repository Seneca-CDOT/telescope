{"version":3,"sources":["../../../src/internal-plugins/bundle-optimisations/gatsby-node.js"],"names":["path","require","exports","onCreateBabelConfig","actions","setBabelPlugin","name","onCreateWebpackConfig","stage","noOp","join","__dirname","objectAssignStub","fetchStub","whatwgFetchStub","setWebpackConfig","resolve","alias","unfetch$"],"mappings":";;AAAA,MAAMA,IAAI,GAAGC,OAAO,CAAE,MAAF,CAApB;;AAEAC,OAAO,CAACC,mBAAR,GAA8B,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAiB;AAC7C;AACAA,EAAAA,OAAO,CAACC,cAAR,CAAuB;AACrBC,IAAAA,IAAI,EAAG;AADc,GAAvB;AAGD,CALD;;AAOAJ,OAAO,CAACK,qBAAR,GAAgC,SAASA,qBAAT,CAA+B;AAC7DC,EAAAA,KAD6D;AAE7DJ,EAAAA;AAF6D,CAA/B,EAG7B;AACD,MAAII,KAAK,KAAM,YAAX,IAA0BA,KAAK,KAAM,cAAzC,EAAwD;AACtD;AACD;;AAED,QAAMC,IAAI,GAAGT,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,oBAAtB,CAAb;AACA,QAAMC,gBAAgB,GAAGZ,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,4BAAtB,CAAzB;AACA,QAAME,SAAS,GAAGb,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,oBAAtB,CAAlB;AACA,QAAMG,eAAe,GAAGd,IAAI,CAACU,IAAL,CAAUC,SAAV,EAAsB,2BAAtB,CAAxB;AAEAP,EAAAA,OAAO,CAACW,gBAAR,CAAyB;AACvBC,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAE;AACL;AACA;AACA,yBAAiBL,gBAHZ;AAIL,0BAAkBA,gBAJb;AAKL,8CAAsCA,gBALjC;AAML;AACAM,QAAAA,QAAQ,EAAEL,SAPL;AAQL,6BAAqBJ,IARhB;AASL,+BAAuBI,SATlB;AAUL,yBAAiBC,eAVZ;AAWL;AACA,yBAAiBL;AAZZ;AADA;AADc,GAAzB;AAkBD,CA/BD","sourcesContent":["const path = require(`path`)\n\nexports.onCreateBabelConfig = ({ actions }) => {\n  // rewrites import { get }from 'lodash' into import get from 'lodash/get';\n  actions.setBabelPlugin({\n    name: `babel-plugin-lodash`,\n  })\n}\n\nexports.onCreateWebpackConfig = function onCreateWebpackConfig({\n  stage,\n  actions,\n}) {\n  if (stage === `build-html` || stage === `develop-html`) {\n    return\n  }\n\n  const noOp = path.join(__dirname, `polyfills/no-op.js`)\n  const objectAssignStub = path.join(__dirname, `polyfills/object-assign.js`)\n  const fetchStub = path.join(__dirname, `polyfills/fetch.js`)\n  const whatwgFetchStub = path.join(__dirname, `polyfills/whatwg-fetch.js`)\n\n  actions.setWebpackConfig({\n    resolve: {\n      alias: {\n        // These files are already polyfilled so these should return in a no-op\n        // Stub Package: object.assign & object-assign\n        \"object.assign\": objectAssignStub,\n        \"object-assign$\": objectAssignStub,\n        \"@babel/runtime/helpers/extends.js$\": objectAssignStub,\n        // Stub package: fetch\n        unfetch$: fetchStub,\n        \"unfetch/polyfill$\": noOp,\n        \"isomorphic-unfetch$\": fetchStub,\n        \"whatwg-fetch$\": whatwgFetchStub,\n        // Stub package: url-polyfill\n        \"url-polyfill$\": noOp,\n      },\n    },\n  })\n}\n"],"file":"gatsby-node.js"}