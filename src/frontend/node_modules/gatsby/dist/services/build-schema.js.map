{"version":3,"sources":["../../src/services/build-schema.ts"],"names":["buildSchema","parentSpan","refresh","Boolean","process","env","GATSBY_EXPERIMENTAL_DISABLE_SCHEMA_REBUILD","activity","reporter","activityTimer","start","span","end"],"mappings":";;;;;;;AAAA;;AACA;;AAGO,eAAeA,WAAf,CAA2B;AAChCC,EAAAA,UADgC;AAEhCC,EAAAA;AAFgC,CAA3B,EAGuC;AAC5C,MACEA,OAAO,IACPC,OAAO,CAACC,OAAO,CAACC,GAAR,CAAYC,0CAAb,CAFT,EAGE;AACA;AACD;;AACD,QAAMC,QAAQ,GAAGC,kBAASC,aAAT,CAAwB,iBAAxB,EAA0C;AACzDR,IAAAA;AADyD,GAA1C,CAAjB;;AAGAM,EAAAA,QAAQ,CAACG,KAAT;AACA,QAAM,mBAAM;AAAET,IAAAA,UAAU,EAAEM,QAAQ,CAACI;AAAvB,GAAN,CAAN;AACAJ,EAAAA,QAAQ,CAACK,GAAT;AACD","sourcesContent":["import { build } from \"../schema\"\nimport reporter from \"gatsby-cli/lib/reporter\"\nimport { IDataLayerContext } from \"../state-machines/data-layer/types\"\n\nexport async function buildSchema({\n  parentSpan,\n  refresh,\n}: Partial<IDataLayerContext>): Promise<void> {\n  if (\n    refresh &&\n    Boolean(process.env.GATSBY_EXPERIMENTAL_DISABLE_SCHEMA_REBUILD)\n  ) {\n    return\n  }\n  const activity = reporter.activityTimer(`building schema`, {\n    parentSpan,\n  })\n  activity.start()\n  await build({ parentSpan: activity.span })\n  activity.end()\n}\n"],"file":"build-schema.js"}