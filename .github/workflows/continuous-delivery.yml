name: Continuous Delivery

on:
  push:
    branches:
      - master

env:
  DOCKER_DEPLOY_TAG: staging

jobs:
  docker-staging:
    name: Docker Build and Push - Staging
    uses: Seneca-CDOT/telescope/.github/workflows/docker-build-and-push.yml@master

  pnpm-publish:
    uses: Seneca-CDOT/telescope/.github/workflows/pnpm-publish.yml@master

  deploy-staging:
    name: Staging Deploy
    needs: [docker-staging, pnpm-publish]
    uses: Seneca-CDOT/telescope/.github/workflows/deploy-webhook.yml@master
